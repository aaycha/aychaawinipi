<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>

<AnchorPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.gestion.ui.utilisateur.Restauration2026Controller"
            prefWidth="1300"
            prefHeight="820"
            stylesheets="@../../styles/restoration-2026.css"
            styleClass="modern-root">

    <!-- BACKGROUND -->
    <StackPane AnchorPane.topAnchor="0"
               AnchorPane.bottomAnchor="0"
               AnchorPane.leftAnchor="0"
               AnchorPane.rightAnchor="0"
               styleClass="background-gradient"/>

    <VBox spacing="20"
          AnchorPane.topAnchor="20"
          AnchorPane.leftAnchor="30"
          AnchorPane.rightAnchor="30"
          AnchorPane.bottomAnchor="20">

        <!-- ================= NAVBAR ================= -->
        <HBox spacing="30" alignment="CENTER_LEFT" styleClass="top-navbar">
            <padding>
                <Insets top="15" right="25" bottom="15" left="25"/>
            </padding>

            <Label text="LAMMA 2026" styleClass="logo-modern"/>

            <Region HBox.hgrow="ALWAYS"/>

            <!-- Search -->
            <HBox spacing="10" alignment="CENTER_LEFT" styleClass="search-box">
                <Label text="ðŸ”"/>
                <TextField promptText="Rechercher un plat..."
                           styleClass="search-field"/>
            </HBox>

            <Region HBox.hgrow="ALWAYS"/>

            <Label text="Bonjour Emma ðŸ‘‹" styleClass="user-label"/>
        </HBox>

        <!-- ================= MAIN CONTENT ================= -->
        <HBox spacing="40" VBox.vgrow="ALWAYS">

            <!-- LEFT SIDE -->
            <VBox spacing="25" prefWidth="550">
                <padding>
                    <Insets right="10"/>
                </padding>

                <Label text="DÃ©couvre ton repas idÃ©al"
                       styleClass="title-modern"
                       style="-fx-font-size: 36px; -fx-letter-spacing: -1;"/>

                <!-- Categories -->
                <HBox spacing="15">
                    <Button text="ðŸ”¥ Tous" styleClass="pill-btn, pill-btn-active"/>
                    <Button text="ðŸ” Fast Food" styleClass="pill-btn"/>
                    <Button text="ðŸ¥— Healthy" styleClass="pill-btn"/>
                    <Button text="ðŸœ Asian" styleClass="pill-btn"/>
                </HBox>

                <!-- Dish List -->
                <ScrollPane fitToWidth="true"
                            VBox.vgrow="ALWAYS"
                            hbarPolicy="NEVER"
                            styleClass="modern-scroll"
                            style="-fx-background-color: transparent;">

                    <VBox fx:id="dishListContainer" spacing="25">
                        <padding>
                            <Insets top="15" right="15" bottom="15" left="15"/>
                        </padding>
                    </VBox>

                </ScrollPane>

            </VBox>

            <!-- RIGHT SIDE (FEATURED) -->
            <VBox spacing="30"
                  HBox.hgrow="ALWAYS"
                  styleClass="featured-glass"
                  alignment="TOP_CENTER">

                <padding>
                    <Insets top="40" right="40" bottom="30" left="40"/>
                </padding>

                <StackPane styleClass="featured-image-box" maxWidth="540">
                    <ImageView fx:id="featuredImage"
                               fitWidth="520"
                               preserveRatio="true"
                               styleClass="featured-image-container"/>
                </StackPane>

                <VBox spacing="20">

                    <HBox alignment="CENTER_LEFT">
                        <VBox spacing="5" HBox.hgrow="ALWAYS">
                            <Label fx:id="featuredTitle"
                                   text="Plat du Jour"
                                   styleClass="featured-title"/>
                            <Label text="Chef's Special 2026 Collection" 
                                   style="-fx-text-fill: #00D4B4; -fx-font-weight: bold; -fx-font-size: 11px;"/>
                        </VBox>
                        <Label fx:id="featuredTime"
                               text="â± 20 min"
                               styleClass="featured-time"
                               style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                    </HBox>

                    <Label fx:id="featuredMarketingText"
                           wrapText="true"
                           styleClass="featured-description"
                           style="-fx-font-size: 15px; -fx-line-spacing: 1.4;"/>

                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Label fx:id="featuredPrice"
                               text="24.00 â‚¬"
                               styleClass="featured-price"
                               style="-fx-font-size: 32px;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <HBox alignment="CENTER" spacing="10" styleClass="health-badge" style="-fx-padding: 8 15;">
                             <Label text="ðŸ”¥ 420 kcal" style="-fx-text-fill: inherit; -fx-font-weight: bold;"/>
                        </HBox>
                    </HBox>

                    <Separator style="-fx-opacity: 0.1;"/>

                    <HBox spacing="20" alignment="CENTER">
                        <Button text="âœ¨ Personnaliser"
                                onAction="#onPersonalize"
                                styleClass="btn-soft"
                                prefHeight="50"
                                prefWidth="180"/>

                        <Button text="ðŸ›’ Ajouter au panier"
                                onAction="#onAddToCart"
                                styleClass="btn-primary"
                                prefHeight="50"
                                HBox.hgrow="ALWAYS"
                                maxWidth="Infinity"/>
                    </HBox>

                </VBox>

                <Region VBox.vgrow="ALWAYS"/>

                <!-- Floating Navigation -->
                <HBox spacing="60"
                      alignment="CENTER"
                      styleClass="floating-nav">

                    <Label text="ðŸ "
                           styleClass="nav-icon"
                           onMouseClicked="#onHome"/>

                    <StackPane onMouseClicked="#onOpenCheckout"
                               styleClass="nav-icon">
                        <Label text="ðŸ›’"/>
                        <Label fx:id="cartCountBadge"
                               text="0"
                               styleClass="badge-modern"
                               StackPane.alignment="TOP_RIGHT">
                            <StackPane.margin>
                                <Insets top="-5" right="-5"/>
                            </StackPane.margin>
                        </Label>
                    </StackPane>

                    <Label text="â¤ï¸"
                           styleClass="nav-icon"
                           onMouseClicked="#toggleFavorites"/>

                    <Label text="ðŸ‘¤"
                           styleClass="nav-icon"
                           onMouseClicked="#onProfile"/>

                </HBox>

            </VBox>

        </HBox>

    </VBox>

</AnchorPane>