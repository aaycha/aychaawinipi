<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.text.Text?>

<AnchorPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.gestion.ui.utilisateur.Restauration2026Controller"
            prefWidth="1200" prefHeight="800"
            stylesheets="@../../styles/restoration-2026.css"
            styleClass="modern-2026-root">

    <HBox spacing="40" AnchorPane.topAnchor="20" AnchorPane.leftAnchor="30" AnchorPane.rightAnchor="30" AnchorPane.bottomAnchor="20">
        
        <!-- Left Side: Discover & List -->
        <VBox spacing="25" prefWidth="480">
            <!-- Header / Top Bar -->
            <HBox alignment="CENTER_LEFT" spacing="20">
                <padding>
                    <Insets top="0" right="0" bottom="10" left="0"/>
                </padding>
                <HBox alignment="CENTER" styleClass="lamma-logo-box">
                    <Label text="LAMMA" styleClass="lamma-logo-text"/>
                </HBox>
                <Region HBox.hgrow="ALWAYS"/>
                
                <HBox spacing="15" alignment="CENTER_LEFT">
                    <Button text="Tous les plats" onAction="#onCategoryClick" style="-fx-background-color: transparent; -fx-text-fill: #1A3C5E; -fx-font-weight: bold; -fx-cursor: hand;"/>
                    <Button text="Mes Favoris â¤ï¸" onAction="#toggleFavorites" style="-fx-background-color: #E0F7FA; -fx-text-fill: #00D4B4; -fx-font-weight: bold; -fx-background-radius: 20px; -fx-cursor: hand;"/>
                </HBox>

                <Label fx:id="userWelcomeLabel" text="Bonjour, Alex" styleClass="delicious-baseline"/>
            </HBox>

            <!-- Header -->
            <VBox spacing="5">
                <Label text="Delicious Food" styleClass="delicious-title"/>
                <Label text="We made fresh and Healthy food" styleClass="delicious-baseline"/>
            </VBox>

            <!-- Categories -->
            <HBox spacing="20" alignment="CENTER_LEFT">
                <VBox spacing="8" alignment="CENTER" styleClass="category-icon" onMouseClicked="#onCategoryClick">
                    <Label text="ðŸ”"/>
                </VBox>
                <VBox spacing="8" alignment="CENTER" styleClass="category-icon" onMouseClicked="#onCategoryClick">
                    <Label text="ðŸœ"/>
                </VBox>
                <VBox spacing="8" alignment="CENTER" styleClass="category-icon" onMouseClicked="#onCategoryClick">
                    <Label text="ðŸ¥—"/>
                </VBox>
                <VBox spacing="8" alignment="CENTER" styleClass="category-icon" onMouseClicked="#onCategoryClick">
                    <Label text="ðŸ¥¤"/>
                </VBox>
            </HBox>

            <!-- Dish List -->
            <ScrollPane fx:id="dishScrollPane" fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" style="-fx-background-color: transparent;" VBox.vgrow="ALWAYS">
                <VBox fx:id="dishListContainer" spacing="20">
                    <padding>
                        <Insets right="15" bottom="20"/>
                    </padding>
                    <!-- Cards will be injected here -->
                </VBox>
            </ScrollPane>
        </VBox>

        <!-- Right Side: Featured Dish -->
        <VBox spacing="30" alignment="TOP_CENTER" HBox.hgrow="ALWAYS" styleClass="featured-peek">
            
            <StackPane fx:id="featuredImageContainer" styleClass="featured-image-container">
                <ImageView fx:id="featuredImage" fitWidth="500" preserveRatio="true" />
            </StackPane>

            <VBox spacing="15" styleClass="peek-metadata">
                <HBox alignment="CENTER_LEFT" spacing="15">
                    <Label fx:id="featuredTitle" text="Eggs Curry" styleClass="delicious-title" style="-fx-font-size: 28px;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label fx:id="featuredTime" text="â± 25 Mins" styleClass="delicious-baseline" style="-fx-font-weight: bold;"/>
                </HBox>

                <Label fx:id="featuredMarketingText" text="special healthy and fat free dish for those who want to lose weight" 
                       wrapText="true" styleClass="delicious-baseline"/>
                
                <HBox spacing="15" alignment="CENTER_LEFT">
                    <Label fx:id="featuredPrice" text="24.00 â‚¬" styleClass="card-price-2026" style="-fx-font-size: 24px;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label text="ðŸ”¥ 420 kcal" styleClass="delicious-baseline" style="-fx-font-weight: bold; -fx-text-fill: #FF5E78;"/>
                </HBox>

                <Separator />

                <HBox spacing="15" alignment="CENTER">
                    <Button text="Personnaliser" onAction="#onPersonalize" styleClass="btn-rose" style="-fx-background-color: #FFF0E6; -fx-text-fill: #FF5E78;"/>
                    <Button text="Add to Cart" onAction="#onAddToCart" styleClass="btn-rose" prefWidth="250"/>
                </HBox>
            </VBox>

            <Region VBox.vgrow="ALWAYS" />
            
            <!-- Bottom Navigation Bar -->
            <HBox spacing="40" alignment="CENTER" styleClass="glass-panel" prefHeight="70">
                <Label fx:id="navHome" text="ðŸ " style="-fx-font-size: 24px; -fx-cursor: hand;"/>
                <StackPane style="-fx-cursor: hand;" onMouseClicked="#onOpenCheckout">
                    <Label fx:id="navCart" text="ðŸ›’" style="-fx-font-size: 24px;"/>
                    <Label fx:id="cartCountBadge" text="0" styleClass="cart-badge" StackPane.alignment="TOP_RIGHT">
                        <StackPane.margin>
                            <Insets top="-5" right="-5"/>
                        </StackPane.margin>
                    </Label>
                </StackPane>
                <Label fx:id="navFav" text="â¤ï¸" style="-fx-font-size: 24px; -fx-cursor: hand;"/>
                <Label fx:id="navProfile" text="ðŸ‘¤" style="-fx-font-size: 24px; -fx-cursor: hand;"/>
            </HBox>
        </VBox>

    </HBox>
</AnchorPane>
