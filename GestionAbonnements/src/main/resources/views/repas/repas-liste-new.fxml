<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.gestion.ui.repas.RepasListeController"
            prefWidth="1200" prefHeight="800"
            style="-fx-background-color: linear-gradient(to bottom, #f8f9fa, #e9ecef);">

    <!-- Header -->
    <top>
        <VBox style="-fx-background-color: linear-gradient(to right, #2c3e50, #3498db);">
            <padding>
                <Insets top="24" right="32" bottom="24" left="32"/>
            </padding>
            <HBox alignment="CENTER_LEFT" spacing="16">
                <ImageView fitHeight="48" preserveRatio="true">
                    <image>
                        <Image url="@../images/lamma-logo.png" />
                    </image>
                </ImageView>
                <Label text="Gestion des Plats" styleClass="module-title">
                    <font>
                        <Font name="System Bold" size="28"/>
                    </font>
                    <style>
                        -fx-text-fill: white;
                        -fx-font-weight: bold;
                    </style>
                </Label>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="Espace Administrateur" style="-fx-text-fill: rgba(255,255,255,0.8); -fx-font-size: 14px;"/>
            </HBox>
        </VBox>
    </top>

    <!-- Center Content -->
    <center>
        <VBox spacing="20" style="-fx-background-color: transparent;">
            <padding>
                <Insets top="24" right="32" bottom="24" left="32"/>
            </padding>

            <!-- Action Bar -->
            <HBox spacing="12" alignment="CENTER_LEFT"
                  style="-fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 8, 0, 0, 2);">
                <padding>
                    <Insets top="16" right="20" bottom="16" left="20"/>
                </padding>
                <Button text="âž• Nouveau Plat" onAction="#onNouveauRepas"
                        style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold;
                               -fx-background-radius: 8; -fx-padding: 12 20; -fx-cursor: hand;"/>
                <Button text="ðŸ”„ Actualiser" onAction="#onActualiser"
                        style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold;
                               -fx-background-radius: 8; -fx-padding: 12 20; -fx-cursor: hand;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <TextField fx:id="searchField" promptText="ðŸ” Rechercher un plat..."
                           style="-fx-background-radius: 8; -fx-padding: 10 16; -fx-font-size: 14px;
                                  -fx-border-color: #ddd; -fx-border-radius: 8;"
                           HBox.hgrow="SOMETIMES" maxWidth="400"/>
            </HBox>

            <!-- Filter Section -->
            <HBox spacing="16" alignment="CENTER_LEFT"
                  style="-fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 8, 0, 0, 2);">
                <padding>
                    <Insets top="16" right="20" bottom="16" left="20"/>
                </padding>
                <Label text="Filtres:" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                <ComboBox fx:id="filterRestaurantCombo" promptText="Tous les restaurants"
                          style="-fx-background-radius: 6;" maxWidth="180"/>
                <ComboBox fx:id="filterMenuCombo" promptText="Tous les menus"
                          style="-fx-background-radius: 6;" maxWidth="180"/>
                <ComboBox fx:id="filterCategorieCombo" promptText="Toutes les catÃ©gories"
                          style="-fx-background-radius: 6;" maxWidth="150"/>
                <ComboBox fx:id="filterTypePlatCombo" promptText="Tous les types"
                          style="-fx-background-radius: 6;" maxWidth="150"/>
                <ComboBox fx:id="filterDisponibleCombo" promptText="Tous les statuts"
                          style="-fx-background-radius: 6;"/>
                <Label fx:id="countLabel" text="0 plats"
                       style="-fx-font-size: 13px; -fx-text-fill: #666;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="âŒ RÃ©initialiser" onAction="#onReinitialiserFiltres"
                        style="-fx-background-color: transparent; -fx-text-fill: #e74c3c;
                               -fx-border-color: #e74c3c; -fx-border-radius: 6; -fx-padding: 8 16;"/>
            </HBox>

            <!-- Table -->
            <VBox VBox.vgrow="ALWAYS" spacing="12"
                  style="-fx-background-color: white; -fx-background-radius: 12;
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 8, 0, 0, 2);">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>

                <Label text="ðŸ“‹ Liste des Plats" style="-fx-font-weight: bold; -fx-font-size: 18px;"/>

                <TableView fx:id="repasTable" VBox.vgrow="ALWAYS"
                           style="-fx-background-color: transparent; -fx-border-color: #e0e0e0;
                                  -fx-border-radius: 8; -fx-table-cell-border-color: transparent;">
                    <placeholder>
                        <VBox alignment="CENTER" spacing="12" style="-fx-padding: 40;">
                            <Label text="ðŸ²" style="-fx-font-size: 48px;"/>
                            <Label text="Aucun plat trouvÃ©" style="-fx-font-size: 16px; -fx-text-fill: #888;"/>
                            <Label text="Commencez par ajouter un nouveau plat" style="-fx-font-size: 13px; -fx-text-fill: #aaa;"/>
                        </VBox>
                    </placeholder>
                    <columns>
                        <TableColumn fx:id="colId" text="ID" prefWidth="50" style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="colNom" text="Nom du Plat" prefWidth="150" style="-fx-font-weight: bold;"/>
                        <TableColumn fx:id="colRestaurant" text="Restaurant" prefWidth="120"/>
                        <TableColumn fx:id="colMenu" text="Menu" prefWidth="120"/>
                        <TableColumn fx:id="colCategorie" text="CatÃ©gorie" prefWidth="100" style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="colTypePlat" text="Type" prefWidth="90" style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="colPrix" text="Prix (â‚¬)" prefWidth="80" style="-fx-alignment: CENTER_RIGHT;"/>
                        <TableColumn fx:id="colTemps" text="Temps (min)" prefWidth="80" style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="colDisponible" text="Dispo" prefWidth="60" style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="colActions" text="Actions" prefWidth="120" style="-fx-alignment: CENTER;"/>
                    </columns>
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                    </columnResizePolicy>
                </TableView>
            </VBox>
        </VBox>
    </center>

    <!-- Footer -->
    <bottom>
        <HBox spacing="12" alignment="CENTER_LEFT"
              style="-fx-background-color: #2c3e50;">
            <padding>
                <Insets top="14" right="32" bottom="14" left="32"/>
            </padding>
            <Label fx:id="statusLabel" text="PrÃªt" style="-fx-text-fill: white;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button fx:id="btnModifier" text="âœï¸ Modifier" onAction="#onModifier" disable="true"
                    style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-padding: 8 16; -fx-cursor: hand;"/>
            <Button fx:id="btnSupprimer" text="ðŸ—‘ï¸ Supprimer" onAction="#onSupprimer" disable="true"
                    style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-padding: 8 16; -fx-cursor: hand;"/>
            <Button fx:id="btnVoirDetails" text="ðŸ‘ï¸ DÃ©tails" onAction="#onVoirDetails" disable="true"
                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-padding: 8 16; -fx-cursor: hand;"/>
        </HBox>
    </bottom>
</BorderPane>
