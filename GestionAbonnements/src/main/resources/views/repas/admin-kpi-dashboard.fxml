<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.gestion.ui.repas.AdminKPIDashboardController"
            stylesheets="@../../styles/restoration-2026.css"
            styleClass="modern-2026-root">
    
    <top>
        <VBox spacing="15" styleClass="glass-panel" style="-fx-padding: 20; -fx-background-radius: 0 0 24 24;">
            <HBox alignment="CENTER_LEFT" spacing="20">
                <Button text="←" styleClass="btn-secondary" style="-fx-background-radius: 50%;" onAction="#onBack"/>
                <Label text="Tableau de Bord Analytics &amp; KPIs" style="-fx-font-size: 24px; -fx-font-weight: 900; -fx-text-fill: #1E3A8A;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="IA Insights Temps Réel" styleClass="badge-lavender"/>
            </HBox>
        </VBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
            <VBox spacing="25" style="-fx-padding: 30;">
                
                <HBox spacing="20">
                    <VBox styleClass="glass-panel-heavy" HBox.hgrow="ALWAYS" alignment="CENTER" style="-fx-padding: 20;">
                        <Label text="COMMANDES DU JOUR" styleClass="sidebar-title"/>
                        <Label text="124" style="-fx-font-size: 32px; -fx-font-weight: 900; -fx-text-fill: #3B82F6;"/>
                        <Label text="+12% vs hier" style="-fx-text-fill: #00D4B4; -fx-font-size: 11px;"/>
                    </VBox>
                    <VBox styleClass="glass-panel-heavy" HBox.hgrow="ALWAYS" alignment="CENTER" style="-fx-padding: 20;">
                        <Label text="REVENUS ESTIMÉS" styleClass="sidebar-title"/>
                        <Label text="1 850 €" style="-fx-font-size: 32px; -fx-font-weight: 900; -fx-text-fill: #00D4B4;"/>
                        <Label text="Cible : 2 000 €" style="-fx-text-fill: #64748B; -fx-font-size: 11px;"/>
                    </VBox>
                    <VBox styleClass="glass-panel-heavy" HBox.hgrow="ALWAYS" alignment="CENTER" style="-fx-padding: 20;">
                        <Label text="SATISFACTION CLIENT" styleClass="sidebar-title"/>
                        <Label text="4.8/5" style="-fx-font-size: 32px; -fx-font-weight: 900; -fx-text-fill: #FBBF24;"/>
                        <Label text="24 avis aujourd'hui" style="-fx-text-fill: #64748B; -fx-font-size: 11px;"/>
                    </VBox>
                </HBox>

                <GridPane hgap="20" vgap="20">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="60"/>
                        <ColumnConstraints percentWidth="40"/>
                    </columnConstraints>
                    
                    <VBox GridPane.columnIndex="0" styleClass="glass-panel-heavy" style="-fx-padding: 20;">
                        <Label text="Tendance des Commandes (7 jours)" style="-fx-font-weight: bold;"/>
                        <LineChart fx:id="orderChart" prefHeight="300">
                            <xAxis><CategoryAxis side="BOTTOM" /></xAxis>
                            <yAxis><NumberAxis side="LEFT" /></yAxis>
                        </LineChart>
                    </VBox>
                    
                    <VBox GridPane.columnIndex="1" styleClass="glass-panel-heavy" style="-fx-padding: 20;">
                        <Label text="Répartition par Catégorie" style="-fx-font-weight: bold;"/>
                        <PieChart fx:id="categoryChart" prefHeight="300" />
                    </VBox>
                </GridPane>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>
